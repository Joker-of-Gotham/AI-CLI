\chapter{Tools Framework }
\hypertarget{md_packages_2core_2src_2tools_2tools_8ts}{}\label{md_packages_2core_2src_2tools_2tools_8ts}\index{Tools Framework@{Tools Framework}}
\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1002}%
\Hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1002}%


This module defines the core framework for tools in the Gemini CLI application, providing interfaces and base classes for creating, validating, and executing tools.\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1003}{}\doxysection{\texorpdfstring{Core Interfaces}{Core Interfaces}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1003}
\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1004}{}\doxysubsection{\texorpdfstring{Tool\+Invocation}{Tool\+Invocation}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1004}
Represents a validated and ready-\/to-\/execute tool call with the following methods\+:
\begin{DoxyItemize}
\item {\ttfamily get\+Description()}\+: Returns a markdown description of the tool operation
\item {\ttfamily tool\+Locations()}\+: Returns file system paths the tool will affect
\item {\ttfamily should\+Confirm\+Execute()}\+: Determines if user confirmation is needed before execution
\item {\ttfamily execute()}\+: Executes the tool with validated parameters
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1005}{}\doxysubsection{\texorpdfstring{Tool\+Builder}{Tool\+Builder}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1005}
Interface for a tool builder that validates parameters and creates invocations\+:
\begin{DoxyItemize}
\item {\ttfamily name}\+: Internal tool name for API calls
\item {\ttfamily display\+Name}\+: User-\/friendly display name
\item {\ttfamily description}\+: Description of what the tool does
\item {\ttfamily kind}\+: Tool category for permissions
\item {\ttfamily schema}\+: Function declaration schema
\item {\ttfamily is\+Output\+Markdown}\+: Whether output should be rendered as markdown
\item {\ttfamily can\+Update\+Output}\+: Whether the tool supports live streaming output
\item {\ttfamily build()}\+: Validates parameters and builds a ready-\/to-\/execute invocation
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1006}{}\doxysubsection{\texorpdfstring{Tool\+Result}{Tool\+Result}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1006}
Interface representing the result of a tool execution\+:
\begin{DoxyItemize}
\item {\ttfamily llm\+Content}\+: Content for LLM history
\item {\ttfamily return\+Display}\+: Markdown string for user display
\item {\ttfamily error}\+: Optional error information if the tool call failed
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1007}{}\doxysection{\texorpdfstring{Base Classes}{Base Classes}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1007}
\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1008}{}\doxysubsection{\texorpdfstring{Base\+Tool\+Invocation}{Base\+Tool\+Invocation}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1008}
A convenience base class implementing the Tool\+Invocation interface with default implementations for optional methods.\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1009}{}\doxysubsection{\texorpdfstring{Declarative\+Tool}{Declarative\+Tool}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1009}
Abstract base class for tools that separates validation from execution\+:
\begin{DoxyItemize}
\item Provides a {\ttfamily build\+And\+Execute()} convenience method
\item Includes error handling with {\ttfamily validate\+Build\+And\+Execute()}
\item Uses a {\ttfamily silent\+Build()} method that never throws
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1010}{}\doxysubsection{\texorpdfstring{Base\+Declarative\+Tool}{Base\+Declarative\+Tool}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1010}
Extends Declarative\+Tool with built-\/in parameter validation using Schema\+Validator\+:
\begin{DoxyItemize}
\item Implements {\ttfamily build()} with validation
\item Provides {\ttfamily validate\+Tool\+Params()} for JSON schema validation
\item Includes {\ttfamily validate\+Tool\+Param\+Values()} for custom validation
\item Requires implementation of {\ttfamily create\+Invocation()} for creating the actual invocation
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1011}{}\doxysection{\texorpdfstring{Type Definitions}{Type Definitions}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1011}
\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1012}{}\doxysubsection{\texorpdfstring{Tool\+Result\+Display}{Tool\+Result\+Display}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1012}
Union type for tool result display\+: string or File\+Diff\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1013}{}\doxysubsection{\texorpdfstring{File\+Diff}{File\+Diff}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1013}
Interface for file difference information\+:
\begin{DoxyItemize}
\item {\ttfamily file\+Diff}\+: The diff content
\item {\ttfamily file\+Name}\+: Name of the file
\item {\ttfamily original\+Content}\+: Original file content
\item {\ttfamily new\+Content}\+: New file content
\item {\ttfamily diff\+Stat}\+: Optional statistics about the diff
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1014}{}\doxysubsection{\texorpdfstring{Diff\+Stat}{Diff\+Stat}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1014}
Interface for diff statistics\+:
\begin{DoxyItemize}
\item Lines and characters added/removed by model and user
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1015}{}\doxysubsection{\texorpdfstring{Tool\+Call\+Confirmation\+Details}{Tool\+Call\+Confirmation\+Details}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1015}
Union type for different confirmation types\+:
\begin{DoxyItemize}
\item {\ttfamily Tool\+Edit\+Confirmation\+Details}\+: For file edits
\item {\ttfamily Tool\+Execute\+Confirmation\+Details}\+: For command execution
\item {\ttfamily Tool\+Mcp\+Confirmation\+Details}\+: For MCP tool calls
\item {\ttfamily Tool\+Info\+Confirmation\+Details}\+: For informational prompts
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1016}{}\doxysubsection{\texorpdfstring{Tool\+Confirmation\+Payload}{Tool\+Confirmation\+Payload}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1016}
Payload for tool confirmation, used to override content in modifiable tools.\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1017}{}\doxysubsection{\texorpdfstring{Tool\+Location}{Tool\+Location}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1017}
Represents a file system location affected by a tool\+:
\begin{DoxyItemize}
\item {\ttfamily path}\+: Absolute file path
\item {\ttfamily line}\+: Optional line number
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1018}{}\doxysection{\texorpdfstring{Enumerations}{Enumerations}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1018}
\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1019}{}\doxysubsection{\texorpdfstring{Tool\+Confirmation\+Outcome}{Tool\+Confirmation\+Outcome}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1019}
Possible outcomes for tool confirmation\+:
\begin{DoxyItemize}
\item {\ttfamily Proceed\+Once}\+: Execute this instance only
\item {\ttfamily Proceed\+Always}\+: Always allow this tool
\item {\ttfamily Proceed\+Always\+Server}\+: Always allow this MCP server
\item {\ttfamily Proceed\+Always\+Tool}\+: Always allow this specific tool
\item {\ttfamily Modify\+With\+Editor}\+: Allow user to modify content
\item {\ttfamily Cancel}\+: Cancel the tool execution
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1020}{}\doxysubsection{\texorpdfstring{Kind}{Kind}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1020}
Tool categories for permissions\+:
\begin{DoxyItemize}
\item {\ttfamily Read}, {\ttfamily Edit}, {\ttfamily Delete}, {\ttfamily Move}, {\ttfamily Search}, {\ttfamily Execute}, {\ttfamily Think}, {\ttfamily Fetch}, {\ttfamily Other}
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1021}{}\doxysection{\texorpdfstring{Utility Functions}{Utility Functions}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1021}
\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1022}{}\doxysubsection{\texorpdfstring{has\+Cycle\+In\+Schema}{has\+Cycle\+In\+Schema}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1022}
Detects cycles in JSON schemas due to {\ttfamily \$ref}s, preventing infinite loops during schema validation.\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1023}{}\doxysection{\texorpdfstring{Type Guards}{Type Guards}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1023}
\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1024}{}\doxysubsection{\texorpdfstring{is\+Tool}{is\+Tool}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1024}
Type guard to check if an object is a Tool.\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1025}{}\doxysection{\texorpdfstring{Type Aliases}{Type Aliases}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1025}
\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1026}{}\doxysubsection{\texorpdfstring{Any\+Tool\+Invocation}{Any\+Tool\+Invocation}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1026}
Type alias for a tool invocation with unknown parameter and result types.\hypertarget{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1027}{}\doxysubsection{\texorpdfstring{Any\+Declarative\+Tool}{Any\+Declarative\+Tool}}\label{md_packages_2core_2src_2tools_2tools_8ts_autotoc_md1027}
Type alias for a declarative tool with unknown parameter and result types. 