\chapter{Telemetry Loggers }
\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts}{}\label{md_packages_2core_2src_2telemetry_2loggers_8ts}\index{Telemetry Loggers@{Telemetry Loggers}}
\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md824}%
\Hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md824}%


This module provides functions for logging various events in the Gemini CLI application using Open\+Telemetry and Clearcut logging systems.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md825}{}\doxysection{\texorpdfstring{Helper Functions}{Helper Functions}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md825}
\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md826}{}\doxysubsection{\texorpdfstring{should\+Log\+User\+Prompts}{should\+Log\+User\+Prompts}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md826}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ shouldLogUserPrompts\ =\ (config:\ Config):\ boolean}

\end{DoxyCode}
 Determines whether user prompts should be logged based on telemetry configuration.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md827}{}\doxysubsection{\texorpdfstring{get\+Common\+Attributes}{get\+Common\+Attributes}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md827}

\begin{DoxyCode}{0}
\DoxyCodeLine{function\ getCommonAttributes(config:\ Config):\ LogAttributes}

\end{DoxyCode}
 Returns common attributes for all log records, including session ID and user email (if available).\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md828}{}\doxysection{\texorpdfstring{Event Logging Functions}{Event Logging Functions}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md828}
\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md829}{}\doxysubsection{\texorpdfstring{log\+Cli\+Configuration}{log\+Cli\+Configuration}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md829}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logCliConfiguration(config:\ Config,\ event:\ StartSessionEvent):\ void}

\end{DoxyCode}
 Logs CLI configuration events with detailed configuration information including model settings, sandbox status, core tools, approval mode, and MCP server configurations.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md830}{}\doxysubsection{\texorpdfstring{log\+User\+Prompt}{log\+User\+Prompt}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md830}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logUserPrompt(config:\ Config,\ event:\ UserPromptEvent):\ void}

\end{DoxyCode}
 Logs user prompt events, conditionally including the actual prompt text based on configuration settings.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md831}{}\doxysubsection{\texorpdfstring{log\+Tool\+Call}{log\+Tool\+Call}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md831}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logToolCall(config:\ Config,\ event:\ ToolCallEvent):\ void}

\end{DoxyCode}
 Logs tool call events with detailed information about tool execution, including success status, duration, and error details. Also records tool call metrics.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md832}{}\doxysubsection{\texorpdfstring{log\+File\+Operation}{log\+File\+Operation}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md832}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logFileOperation(config:\ Config,\ event:\ FileOperationEvent):\ void}

\end{DoxyCode}
 Logs file operation events with information about file operations performed by tools, including file metadata. Records file operation metrics.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md833}{}\doxysubsection{\texorpdfstring{log\+Api\+Request}{log\+Api\+Request}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md833}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logApiRequest(config:\ Config,\ event:\ ApiRequestEvent):\ void}

\end{DoxyCode}
 Logs API request events with information about requests to AI models.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md834}{}\doxysubsection{\texorpdfstring{log\+Flash\+Fallback}{log\+Flash\+Fallback}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md834}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logFlashFallback(config:\ Config,\ event:\ FlashFallbackEvent):\ void}

\end{DoxyCode}
 Logs flash model fallback events when switching to a different model due to issues.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md835}{}\doxysubsection{\texorpdfstring{log\+Api\+Error}{log\+Api\+Error}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md835}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logApiError(config:\ Config,\ event:\ ApiErrorEvent):\ void}

\end{DoxyCode}
 Logs API error events with detailed error information including status codes and error types. Records API error metrics.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md836}{}\doxysubsection{\texorpdfstring{log\+Api\+Response}{log\+Api\+Response}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md836}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logApiResponse(config:\ Config,\ event:\ ApiResponseEvent):\ void}

\end{DoxyCode}
 Logs API response events with response details and status information. Records API response metrics and token usage metrics for different token types (input, output, cache, thoughts, tool).\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md837}{}\doxysubsection{\texorpdfstring{log\+Loop\+Detected}{log\+Loop\+Detected}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md837}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logLoopDetected(config:\ Config,\ event:\ LoopDetectedEvent):\ void}

\end{DoxyCode}
 Logs loop detection events when potential infinite loops are detected in the conversation.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md838}{}\doxysubsection{\texorpdfstring{log\+Next\+Speaker\+Check}{log\+Next\+Speaker\+Check}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md838}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logNextSpeakerCheck(config:\ Config,\ event:\ NextSpeakerCheckEvent):\ void}

\end{DoxyCode}
 Logs next speaker check events during conversation flow management.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md839}{}\doxysubsection{\texorpdfstring{log\+Slash\+Command}{log\+Slash\+Command}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md839}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logSlashCommand(config:\ Config,\ event:\ SlashCommandEvent):\ void}

\end{DoxyCode}
 Logs slash command execution events.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md840}{}\doxysubsection{\texorpdfstring{log\+Ide\+Connection}{log\+Ide\+Connection}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md840}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logIdeConnection(config:\ Config,\ event:\ IdeConnectionEvent):\ void}

\end{DoxyCode}
 Logs IDE connection events with connection type information.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md841}{}\doxysubsection{\texorpdfstring{log\+Conversation\+Finished\+Event}{log\+Conversation\+Finished\+Event}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md841}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logConversationFinishedEvent(config:\ Config,\ event:\ ConversationFinishedEvent):\ void}

\end{DoxyCode}
 Logs conversation completion events.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md842}{}\doxysubsection{\texorpdfstring{log\+Chat\+Compression}{log\+Chat\+Compression}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md842}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logChatCompression(config:\ Config,\ event:\ ChatCompressionEvent):\ void}

\end{DoxyCode}
 Logs chat history compression events, including the number of tokens saved. Records chat compression metrics.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md843}{}\doxysubsection{\texorpdfstring{log\+Kitty\+Sequence\+Overflow}{log\+Kitty\+Sequence\+Overflow}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md843}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logKittySequenceOverflow(config:\ Config,\ event:\ KittySequenceOverflowEvent):\ void}

\end{DoxyCode}
 Logs kitty sequence buffer overflow events when terminal sequences exceed buffer limits.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md844}{}\doxysubsection{\texorpdfstring{log\+Malformed\+Json\+Response}{log\+Malformed\+Json\+Response}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md844}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logMalformedJsonResponse(config:\ Config,\ event:\ MalformedJsonResponseEvent):\ void}

\end{DoxyCode}
 Logs malformed JSON response events when API responses cannot be parsed.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md845}{}\doxysubsection{\texorpdfstring{log\+Invalid\+Chunk}{log\+Invalid\+Chunk}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md845}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logInvalidChunk(config:\ Config,\ event:\ InvalidChunkEvent):\ void}

\end{DoxyCode}
 Logs invalid chunk events when receiving malformed data from streaming responses. Records invalid chunk metrics.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md846}{}\doxysubsection{\texorpdfstring{log\+Content\+Retry}{log\+Content\+Retry}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md846}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logContentRetry(config:\ Config,\ event:\ ContentRetryEvent):\ void}

\end{DoxyCode}
 Logs content retry events when attempting to recover from API errors. Records content retry metrics.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md847}{}\doxysubsection{\texorpdfstring{log\+Content\+Retry\+Failure}{log\+Content\+Retry\+Failure}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md847}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ function\ logContentRetryFailure(config:\ Config,\ event:\ ContentRetryFailureEvent):\ void}

\end{DoxyCode}
 Logs content retry failure events when all retry attempts have been exhausted. Records content retry failure metrics.\hypertarget{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md848}{}\doxysection{\texorpdfstring{Integration}{Integration}}\label{md_packages_2core_2src_2telemetry_2loggers_8ts_autotoc_md848}
The module integrates with\+:
\begin{DoxyItemize}
\item Open\+Telemetry logging API for structured event logging
\item Clearcut logger for Google-\/specific event logging
\item UI telemetry service for frontend event tracking
\item Metrics recording functions for quantitative analysis
\item User account management for user identification
\item Safe JSON stringification for serializing complex objects 
\end{DoxyItemize}