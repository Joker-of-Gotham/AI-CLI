\chapter{Gemini\+Client 类 }
\hypertarget{md_packages_2core_2src_2core_2client}{}\label{md_packages_2core_2src_2core_2client}\index{GeminiClient 类@{GeminiClient 类}}
\label{md_packages_2core_2src_2core_2client_autotoc_md573}%
\Hypertarget{md_packages_2core_2src_2core_2client_autotoc_md573}%


{\ttfamily Gemini\+Client} 类是 i\+Flow CLI 核心模块中的主要客户端实现，负责与 Gemini AI 模型进行交互。\hypertarget{md_packages_2core_2src_2core_2client_autotoc_md574}{}\doxysection{\texorpdfstring{主要功能}{主要功能}}\label{md_packages_2core_2src_2core_2client_autotoc_md574}

\begin{DoxyEnumerate}
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}聊天管理\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：管理与 Gemini 模型的聊天会话
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}历史记录处理\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：维护和操作聊天历史记录
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}工具集成\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：设置和管理可用的工具
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}内容生成\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：生成文本内容、\+JSON 数据和嵌入向量
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}聊天压缩\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：在聊天历史过长时进行压缩以节省 token
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+IDE 上下文集成\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：在 IDE 模式下提供编辑器上下文信息
\end{DoxyEnumerate}\hypertarget{md_packages_2core_2src_2core_2client_autotoc_md575}{}\doxysection{\texorpdfstring{核心方法}{核心方法}}\label{md_packages_2core_2src_2core_2client_autotoc_md575}
\hypertarget{md_packages_2core_2src_2core_2client_autotoc_md576}{}\doxysubsection{\texorpdfstring{初始化和配置}{初始化和配置}}\label{md_packages_2core_2src_2core_2client_autotoc_md576}

\begin{DoxyItemize}
\item {\ttfamily initialize()} -\/ 初始化客户端
\item {\ttfamily start\+Chat(extra\+History?\+: Content\mbox{[}\mbox{]})} -\/ 开始新的聊天会话
\item {\ttfamily reset\+Chat()} -\/ 重置聊天会话
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2client_autotoc_md577}{}\doxysubsection{\texorpdfstring{聊天操作}{聊天操作}}\label{md_packages_2core_2src_2core_2client_autotoc_md577}

\begin{DoxyItemize}
\item {\ttfamily send\+Message\+Stream()} -\/ 发送消息并以流式方式接收响应
\item {\ttfamily add\+History()} -\/ 向聊天历史添加内容
\item {\ttfamily set\+History()} -\/ 设置完整的聊天历史
\item {\ttfamily get\+History()} -\/ 获取当前聊天历史
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2client_autotoc_md578}{}\doxysubsection{\texorpdfstring{内容生成}{内容生成}}\label{md_packages_2core_2src_2core_2client_autotoc_md578}

\begin{DoxyItemize}
\item {\ttfamily generate\+Content()} -\/ 生成内容
\item {\ttfamily generate\+Json()} -\/ 生成 JSON 格式的内容
\item {\ttfamily generate\+Embedding()} -\/ 生成文本嵌入向量
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2client_autotoc_md579}{}\doxysubsection{\texorpdfstring{工具管理}{工具管理}}\label{md_packages_2core_2src_2core_2client_autotoc_md579}

\begin{DoxyItemize}
\item {\ttfamily set\+Tools()} -\/ 设置可用工具
\item {\ttfamily get\+Chat\+Recording\+Service()} -\/ 获取聊天记录服务
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2client_autotoc_md580}{}\doxysection{\texorpdfstring{辅助函数}{辅助函数}}\label{md_packages_2core_2src_2core_2client_autotoc_md580}

\begin{DoxyItemize}
\item {\ttfamily is\+Thinking\+Supported()} -\/ 检查模型是否支持思考模式
\item {\ttfamily is\+Thinking\+Default()} -\/ 检查模型是否默认启用思考模式
\item {\ttfamily find\+Index\+After\+Fraction()} -\/ 根据比例查找历史记录索引
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2client_autotoc_md581}{}\doxysection{\texorpdfstring{常量}{常量}}\label{md_packages_2core_2src_2core_2client_autotoc_md581}

\begin{DoxyItemize}
\item {\ttfamily MAX\+\_\+\+TURNS} -\/ 最大对话轮数
\item {\ttfamily COMPRESSION\+\_\+\+TOKEN\+\_\+\+THRESHOLD} -\/ 触发压缩的 token 阈值
\item {\ttfamily COMPRESSION\+\_\+\+PRESERVE\+\_\+\+THRESHOLD} -\/ 压缩时保留的历史比例 
\end{DoxyItemize}