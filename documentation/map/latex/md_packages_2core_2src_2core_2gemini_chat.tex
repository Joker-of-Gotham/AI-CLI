\chapter{Gemini\+Chat 类 }
\hypertarget{md_packages_2core_2src_2core_2gemini_chat}{}\label{md_packages_2core_2src_2core_2gemini_chat}\index{GeminiChat 类@{GeminiChat 类}}
\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md590}%
\Hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md590}%


{\ttfamily Gemini\+Chat} 类实现了与 Gemini AI 模型的聊天功能，管理聊天历史和消息交互。\hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md591}{}\doxysection{\texorpdfstring{主要功能}{主要功能}}\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md591}

\begin{DoxyEnumerate}
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}聊天会话管理\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：维护聊天状态和历史记录
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}消息发送\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：支持同步和流式消息发送
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}历史记录处理\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：管理聊天历史的添加、获取和清理
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}工具集成\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：设置和管理可用工具
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}聊天记录服务\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}：记录聊天会话用于调试和分析
\end{DoxyEnumerate}\hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md592}{}\doxysection{\texorpdfstring{核心方法}{核心方法}}\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md592}
\hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md593}{}\doxysubsection{\texorpdfstring{消息发送}{消息发送}}\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md593}

\begin{DoxyItemize}
\item {\ttfamily send\+Message()} -\/ 发送消息并等待完整响应
\item {\ttfamily send\+Message\+Stream()} -\/ 发送消息并以流式方式接收响应
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md594}{}\doxysubsection{\texorpdfstring{历史记录管理}{历史记录管理}}\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md594}

\begin{DoxyItemize}
\item {\ttfamily get\+History()} -\/ 获取聊天历史记录
\item {\ttfamily clear\+History()} -\/ 清除聊天历史记录
\item {\ttfamily add\+History()} -\/ 添加消息到历史记录
\item {\ttfamily set\+History()} -\/ 设置完整的聊天历史记录
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md595}{}\doxysubsection{\texorpdfstring{工具管理}{工具管理}}\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md595}

\begin{DoxyItemize}
\item {\ttfamily set\+Tools()} -\/ 设置可用工具
\item {\ttfamily get\+Chat\+Recording\+Service()} -\/ 获取聊天记录服务
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md596}{}\doxysection{\texorpdfstring{内部方法}{内部方法}}\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md596}

\begin{DoxyItemize}
\item {\ttfamily record\+History()} -\/ 记录用户输入和模型输出到历史记录
\item {\ttfamily process\+Stream\+Response()} -\/ 处理流式响应数据
\item {\ttfamily is\+Valid\+Response()} -\/ 验证响应是否有效
\item {\ttfamily extract\+Curated\+History()} -\/ 提取有效的聊天历史记录
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md597}{}\doxysection{\texorpdfstring{Stream\+Event\+Type 枚举}{Stream\+Event\+Type 枚举}}\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md597}
定义了流式事件类型：
\begin{DoxyItemize}
\item {\ttfamily CHUNK} -\/ 来自 API 的常规内容块
\item {\ttfamily RETRY} -\/ 即将重试的信号
\end{DoxyItemize}\hypertarget{md_packages_2core_2src_2core_2gemini_chat_autotoc_md598}{}\doxysection{\texorpdfstring{Empty\+Stream\+Error 类}{Empty\+Stream\+Error 类}}\label{md_packages_2core_2src_2core_2gemini_chat_autotoc_md598}
自定义错误类，用于表示流完成但没有有效内容的情况，会触发重试机制。 